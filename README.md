# Paper Folding Tester

## Usage and Deployment
- A web-based tool inspired by the Paper Folding Test (VZ-2) developed by ETS  
- Deployed for academic research use: https://schenck-lab.github.io/paper-folding-test/  
- No original ETS test content is distributed  
- © 1962 Educational Testing Service. All rights reserved

## Theme and Svg

### Theme Modes
- `BLACK_WHITE` (`'white'`):  
  Renders the paper in solid white, matching the background. This theme resembles the original PDF version of the test.

- `SOLID_COLOR` (`'solid'`):  
  Renders the paper in a light purple color, clearly distinguishing it from the background.

- `ALPHA_BLENDING` (`'alpha'`):  
  Renders the paper with semi-transparent color, allowing overlapping areas to appear darker and simulate layer stacking.

### SVG Element Specification
- All figures in this test are implemented using SVG elements.
- We define an imaginary **24 × 24 square** as the base coordinate system for the paper.
- Each **hole** is positioned using a pair of integers in this paper coordinate system.
- For each **Answer Option**, we use a list of hole positions to render the frame.
- For each **Question Frame**, we compose the SVG using the following parts:
  - `prePath`
  - `rect`
  - `poly`
  - `hole`
  - `postPath`


## DATA COLLECTION

### File Naming: `P000_FL_MMDD_HHMM.csv`
- We use JavaScript’s `new Date()` to get the **local time** based on the user’s device.
- `P000`: Participant ID (uppercase `P` + 3-digit number)
- `FL`: Initials of first and last name
- `MMDD`: Month and day of the test
- `HHMM`: Hour and minute when the test begins


### Meta Data Specification

- `PID`: (not used for this project)
- `First_Name`: Participant's first name.
- `Last_Name`: Participant's last name.
- `Email`: Participant's registered email address.
- `Start_Time`: Timestamp when the user clicks the **“Start the Test”** button.  
  Format: generated by `new Date()` in JavaScript.
- `Theme`**: The display theme used for this test session.
- `Answer_1`: A string of 10 characters representing the user’s selected answers for questions in **Part 1**.  
  Example: `"ABCDEABCDE"`
- `Answer_2`: Same format as `Answer_1`, representing answers for **Part 2**.
- `Score_1`: Raw score for **Part 1**. Each correct answer adds 1 point.
- `Score_2`: Raw score for **Part 2**. Each correct answer adds 1 point.
- `Record_Count`: the number of record for mouse event data.
- `Strategy`: a string of single number-character,
- `Gender`: 
    - `N`: 'I Choose Not to Identify'
    - `M`: 'Male'
    - `F`: 'Female'
    - the string in the [] is the user's input
- `Races`: a string of numbers
    - 0: 'White/Non-Hispanic'
    - 1: 'Hispanic'
    - 2: 'Middle Eastern'
    - 3: 'Asian'
    - 4: 'African American'
    - 5: 'African'
    - 6: 'Other'
- `Other_Race`: 'none' or user's input
- `Birth_Year`: the birth year
- `Major`: 'Undecided' or a string of user input with ';' separator
- `Games`: a string of numbers with ';' separator,
    - 0: 'First-Person Shooters (FPS)'
    - 1: 'Racing/Driving'
    - 2: 'Real-Time Strategy (RTS)'
    - 3: 'Simulation/Builder'
    - 4: 'Board Strategy Games (Chess, Go, etc.)'
    - 5: 'Platformers'
    - 6: 'MOBA'
    - 7: 'Puzzle Games'
    - 8: 'MMO (Massively Multiplayer Online)'
    - 9: 'RPG (Role-Playing Games)'
    - 10: 'Casual/Mobile Games'
    - 11: 'None of the Above'
- `Handedness`:
    - `L`: left handedness
    - `R`: right handedness
    - `M`: mixed handedness


### Object Labels
- `QF1`–`QF5`: Question frames (top row), 1-indexed
- `AO1`–`AO5`: Answer options (bottom row), 1-indexed
- `CONF`: the `Confirm` button
- `HELP`: the `?` button for displaying the test instruction review
- `none`: Any other area not covered by the above


### Sampling Policy
- `Minimum Displacement Threshold`: **10** in CSS pixel.
- **Click events** are **ALWAYS** recorded.
- **Hover Object changes** are **ALWAYS** recorded.


###  CSV Header (Data Schema)
| **Column**      | **Description** |
|-----------------|-----------------|
| `PART_ID`       | The part number of the test (1 or 2) |
| `QUESTION_ID`   | The question index *within that part*, 1-indexed, up to 10 |
| `TIMESTAMP`     | Time when the event was recorded, in `hh:mm:ss.sss` format (granularity: ms) |
| `STEP`          | 0-indexed frame counter (per question) |
| `MOUSE_X`       | X coordinate in the **viewport coordinate system** |
| `MOUSE_Y`       | Y coordinate in the **viewport coordinate system** |
| `OBJ_HOVER_ON`  | The object currently under the mouse: `QF1` to `QF5`, `AO1` to `AO5`, `BTN`, `HELP` or `none` |
| `CLICK`         | `1`: is a click event, `0`: not a click event |
| `HELP`          | `1`: the instruction review modal is popped, `0`: not popped |


## Firebase Specification

- Project name: `kslab-pft-2025`

### Database

- Collection: `participants`
- Document Schma
    ```
    email: {
        uid: string,
        email: string,
        firstName: string,
        lastName: string,
        participationStage: 'sentLink' | 'inProgress' | 'completed',
        timeStamp: {
            sentLink: null,
            startTest: null,
            uploadCsv: null,
        },
        csvFileName: null,
    }
    ```

